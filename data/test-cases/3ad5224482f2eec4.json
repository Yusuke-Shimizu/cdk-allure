{"uid":"3ad5224482f2eec4","name":"test_sqs_queue_created","fullName":"tests.unit.test_cdk_allure_stack#test_sqs_queue_created","historyId":"d0a0887b9941b805da22d5a03f49f15f","time":{"start":1687297963242,"stop":1687297963316,"duration":74},"description":"\n    Stack:\n        CdkAllureStack\n    Item:\n        SQSの可視性タイムアウトの確認\n    Expect:\n        300秒であること\n    ","descriptionHtml":"<pre><code>Stack:\n    CdkAllureStack\nItem:\n    SQSの可視性タイムアウトの確認\nExpect:\n    300秒であること\n</code></pre>\n","status":"broken","statusMessage":"RuntimeError: Error: Template has 1 resources with type AWS::SQS::Queue, but none match as expected.\nThe 1 closest matches:\nCdkAllureQueue744C0319 :: {\n  \"DeletionPolicy\": \"Delete\",\n  \"Properties\": {\n!!   Expected 300 but received 100\n    \"VisibilityTimeout\": 100\n  },\n  \"Type\": \"AWS::SQS::Queue\",\n  \"UpdateReplacePolicy\": \"Delete\"\n}","statusTrace":"jsii.errors.JavaScriptError: \n  @jsii/kernel.RuntimeError: Error: Template has 1 resources with type AWS::SQS::Queue, but none match as expected.\n  The 1 closest matches:\n  CdkAllureQueue744C0319 :: {\n    \"DeletionPolicy\": \"Delete\",\n    \"Properties\": {\n  !!   Expected 300 but received 100\n      \"VisibilityTimeout\": 100\n    },\n    \"Type\": \"AWS::SQS::Queue\",\n    \"UpdateReplacePolicy\": \"Delete\"\n  }\n      at Kernel._ensureSync (/tmp/tmpavdntxe5/lib/program.js:10369:27)\n      at Kernel.invoke (/tmp/tmpavdntxe5/lib/program.js:9769:34)\n      at KernelHost.processRequest (/tmp/tmpavdntxe5/lib/program.js:11544:36)\n      at KernelHost.run (/tmp/tmpavdntxe5/lib/program.js:11504:22)\n      at Immediate._onImmediate (/tmp/tmpavdntxe5/lib/program.js:11505:46)\n      at process.processImmediate (node:internal/timers:476:21)\n\nThe above exception was the direct cause of the following exception:\n\n    def test_sqs_queue_created():\n        \"\"\"\n        Stack:\n            CdkAllureStack\n        Item:\n            SQSの可視性タイムアウトの確認\n        Expect:\n            300秒であること\n        \"\"\"\n        app = core.App()\n        stack = CdkAllureStack(app, \"cdk-allure\")\n        template = assertions.Template.from_stack(stack)\n    \n>       template.has_resource_properties(\"AWS::SQS::Queue\", {\n            \"VisibilityTimeout\": 300\n        })\n\ntests/unit/test_cdk_allure_stack.py:19: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n.env/lib/python3.11/site-packages/aws_cdk/assertions/__init__.py:1623: in has_resource_properties\n    return typing.cast(None, jsii.invoke(self, \"hasResourceProperties\", [type, props]))\n.env/lib/python3.11/site-packages/jsii/_kernel/__init__.py:149: in wrapped\n    return _recursize_dereference(kernel, fn(kernel, *args, **kwargs))\n.env/lib/python3.11/site-packages/jsii/_kernel/__init__.py:399: in invoke\n    response = self.provider.invoke(\n.env/lib/python3.11/site-packages/jsii/_kernel/providers/process.py:378: in invoke\n    return self._process.send(request, InvokeResponse)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <jsii._kernel.providers.process._NodeProcess object at 0x7fd5ecfdc3d0>\nrequest = InvokeRequest(objref=ObjRef(ref='aws-cdk-lib.assertions.Template@10007', interfaces=None), method='hasResourceProperties', args=['AWS::SQS::Queue', {'$jsii.map': {'VisibilityTimeout': 300}}])\nresponse_type = <class 'jsii._kernel.types.InvokeResponse'>\n\n    def send(\n        self, request: KernelRequest, response_type: Type[KernelResponse]\n    ) -> KernelResponse:\n        req_dict = self._serializer.unstructure(request)\n        data = json.dumps(req_dict, default=jdefault).encode(\"utf8\")\n    \n        # Send our data, ensure that it is framed with a trailing \\n\n        assert self._process.stdin is not None\n        self._process.stdin.write(b\"%b\\n\" % (data,))\n        self._process.stdin.flush()\n    \n        resp: _ProcessResponse = self._serializer.structure(\n            self._next_message(), _ProcessResponse\n        )\n    \n        if isinstance(resp, _OkayResponse):\n            return self._serializer.structure(resp.ok, response_type)\n        elif isinstance(resp, _CallbackResponse):\n            return resp.callback\n        else:\n            if resp.name == ErrorType.JSII_FAULT.value:\n                raise JSIIError(resp.error) from JavaScriptError(resp.stack)\n>           raise RuntimeError(resp.error) from JavaScriptError(resp.stack)\nE           RuntimeError: Error: Template has 1 resources with type AWS::SQS::Queue, but none match as expected.\nE           The 1 closest matches:\nE           CdkAllureQueue744C0319 :: {\nE             \"DeletionPolicy\": \"Delete\",\nE             \"Properties\": {\nE           !!   Expected 300 but received 100\nE               \"VisibilityTimeout\": 100\nE             },\nE             \"Type\": \"AWS::SQS::Queue\",\nE             \"UpdateReplacePolicy\": \"Delete\"\nE           }\n\n.env/lib/python3.11/site-packages/jsii/_kernel/providers/process.py:340: RuntimeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"afterStages":[],"labels":[{"name":"parentSuite","value":"tests.unit"},{"name":"suite","value":"test_cdk_allure_stack"},{"name":"host","value":"fv-az411-902"},{"name":"thread","value":"2171-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.unit.test_cdk_allure_stack"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"3ad5224482f2eec4.json","parameterValues":[]}